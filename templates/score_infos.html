<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生成绩管理系统</title>
    <link rel="icon" href="../favicon.ico">
    <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../static/css/main.css" />

    <script>
        function changeSpecialty() {
            var schoolSelect = document.getElementById("schoolSelect");
            var specialtySelect = document.getElementById("specialtySelect");

            // 清空专业班级选项
            specialtySelect.innerHTML = "";

            // 添加“不限”选项
            var option = document.createElement("option");
            option.text = "不限";
            option.value = "";
            specialtySelect.add(option);

            // 根据所选学院修改专业班级选项
            switch (schoolSelect.value) {
                case "计算机与信息工程学院":
                    var specialties = [
                        "计算机科学与技术1班", "计算机科学与技术2班", "计算机科学与技术3班",
                        "数据科学与大数据技术1班", "数据科学与大数据技术2班", "数据科学与大数据技术3班",
                        "电子信息工程1班", "电子信息工程2班", "电子信息工程3班",
                        "电子商务1班", "电子商务2班", "电子商务3班",
                        "软件工程1班", "软件工程2班", "软件工程3班",
                        "网络安全1班", "网络安全2班", "网络安全3班"
                    ];
                    break;

                case "金融学院":
                    var specialties = [
                        "投资学1班", "投资学2班", "投资学3班",
                        "保险学1班", "保险学2班", "保险学3班",
                        "金融工程1班", "金融工程2班", "金融工程3班",
                        "金融学1班", "金融学2班", "金融学3班"
                    ];
                    break;

                default:
                    var specialties = [];
            }

            // 添加专业班级选项
            for (var i = 0; i < specialties.length; i++) {
                var option = document.createElement("option");
                option.text = specialties[i];
                option.value = specialties[i];
                specialtySelect.add(option);
            }
        }


        function changeCourse() {
            var specialtySelect = document.getElementById("specialtySelect");
            var courseSelect = document.getElementById("courseSelect");

            // 清空专业课选项
            courseSelect.innerHTML = "";

            // 添加“不限”选项
            var option = document.createElement("option");
            option.text = "不限";
            option.value = "";
            courseSelect.add(option);

            // 根据所选学院修改专业班级选项
            switch (specialtySelect.value) {
                case "计算机科学与技术1班":
                case "计算机科学与技术2班":
                case "计算机科学与技术3班":
                    var courses = [
                        "计算机组成原理", "操作系统", "数据结构与算法", "数据库系统原理",
                        "计算机网络", "编译原理", "软件工程导论", "人工智能与机器学习"
                    ];
                    break;

                case "数据科学与大数据技术1班":
                case "数据科学与大数据技术2班":
                case "数据科学与大数据技术3班":
                    var courses = [
                        "数据科学导论", "数据挖掘与分析", "大数据处理技术", "机器学习与深度学习",
                        "数据可视化", "分布式计算与云计算", "数据库原理与应用", "统计数据分析"
                    ];
                    break;

                case "电子信息工程1班":
                case "电子信息工程2班":
                case "电子信息工程3班":
                    var courses = [
                        "信号与系统", "通信原理", "数字电路与逻辑设计", "微机原理与接口技术",
                        "电磁场与电磁波", "电子测量技术", "嵌入式系统", "信息论基础"
                    ];
                    break;

                case "电子商务1班":
                case "电子商务2班":
                case "电子商务3班":
                    var courses = [
                         "电子商务概论", "网络营销", "电子商务物流", "电子商务法律",
                         "电子商务数据分析", "电子商务系统设计与开发", "跨境电子商务", "电子商务运营管理"
                    ];
                    break;

                case "软件工程1班":
                case "软件工程2班":
                case "软件工程3班":
                    var courses = [
                         "软件工程导论", "面向对象程序设计", "软件需求工程", "软件设计模式",
                         "软件测试技术", "软件项目管理", "软件体系结构", "软件开发工具与环境"
                    ];
                    break;

                case "网络安全1班":
                case "网络安全2班":
                case "网络安全3班":
                    var courses = [
                        "网络安全导论", "密码学基础", "网络安全协议", "防火墙与入侵检测技术",
                        "网络安全管理与策略", "网络安全法律与伦理", "网络攻击与防御", "云计算与大数据安全"
                    ];
                    break;

                case "投资学1班":
                case "投资学2班":
                case "投资学3班":
                    var courses = [
                        "投资学原理", "证券投资分析", "投资组合管理",
                        "衍生金融工具与风险管理", "房地产投资与管理", "行为金融与投资心理"
                    ];
                    break;

                case "保险学1班":
                case "保险学2班":
                case "保险学3班":
                    var courses = [
                        "保险学原理", "保险精算与风险管理", "保险市场与营销",
                        "保险公司经营管理", "社会保险与员工福利", "保险法规与监管"
                    ];
                    break;

                case "金融工程1班":
                case "金融工程2班":
                case "金融工程3班":
                    var courses = [
                        "金融工程导论", "金融计量经济学", "固定收益证券分析",
                        "金融衍生品定价", "金融风险管理", "金融算法与编程"
                    ];
                    break;

                case "金融学1班":
                case "金融学2班":
                case "金融学3班":
                    var courses = [
                        "金融学基础", "货币银行学", "国际金融",
                        "公司金融", "金融市场与机构", "商业银行经营与管理"
                    ];
                    break;

                default:
                    var courses = [];
            }

            // 添加课程选项
            for (var i = 0; i < courses.length; i++) {
                var option = document.createElement("option");
                option.text = courses[i];
                option.value = courses[i];
                courseSelect.add(option);
            }
        }



    </script>
</head>

<body>
    <div class="container">
        <div class="header">
            <span class="left">汉 东 大 学 学 生 信 息 管 理 系 统</span>
            <span class="right">你 好，{{user_info}}管 理 员!</span>
            <span class="right_right"><a href="/">退出登陆</a></span>
        </div>
        <div class="leftside">
        <ul>
            <li><a href="/student_view">学生信息查询</a></li>
            <li><a href="/student">学生信息录入</a></li>
            <li><a href="/update_student">学生信息删改</a></li>
            <li><a href="/teacher_class">老师开设课程查看</a></li>
            <li><a href="/student_courses">学生选课管理</a></li>
            <li class="first"><a href="">学生成绩</a></li>
            <li><a href="/graduation">毕业学生去向</a></li>
            <li><a href="/dataAnalysis">数据分析</a></li>
            <li><a href="/adminstator">系统管理员变动</a></li>
        </ul>
        </div>
        <div class="container-fluid">
            <h1 class="sub-header center">成 绩 查 询 系 统</h1>
            <div class="table-responsive">
                <table class="table table-striped">
                    <form action="" method="post" onsubmit="return handleSubmit()">
                        <thead>
                            <tr>
                                <th>学号</th>
                                <th>年级</th>
                                <th>学院</th>
                                <th>专业班级</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input class="long" name="stu_id" type="text" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                                <td>
                                    <select name="stu_grade">
                                        <option value="">不限</option>
                                        <option value="2010">2010</option>
                                        <option value="2011">2011</option>
                                        <option value="2012">2012</option>
                                        <option value="2013">2013</option>
                                        <option value="2014">2014</option>
                                        <option value="2015">2015</option>
                                        <option value="2016">2016</option>
                                        <option value="2017">2017</option>
                                        <option value="2018">2018</option>
                                        <option value="2019">2019</option>
                                        <option value="2020">2020</option>
                                        <option value="2021">2021</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="schoolSelect" name="stu_school" onchange="changeSpecialty()">
                                        <!-- 学院选项 -->
                                        <option value="">不限</option>
                                        <option value="计算机与信息工程学院">计算机与信息工程学院</option>
                                        <option value="金融学院">金融学院</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="specialtySelect" name="stu_specialtyWithClass" onchange="changeCourse()">
                                        <option value="">不限</option>
                                        <!-- 专业班级选项 -->
                                    </select>
                                </td>

                            </tr>
                        </tbody>
                        <thead>
                            <tr>
                                <th>专业课</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <select id="courseSelect" name="course_name">
                                        <option value="">不限</option>
                                    </select>
                                </td>
                                <td><input class="last" type="submit" value="查询" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                            </tr>
                        </tbody>
                    </form>
                    <!-- 查询结果展示 -->
                    {% if query_conditions or query_results %}
                    <table class="table table-striped student-table">
                        <!-- 表头 -->
                        <thead>
                            <tr>
                                <th style="width: 10%;">学号</th>
                                <th style="width: 6%;">年级</th>
                                <th style="width: 6%;">姓名</th>
                                <th style="width: 4%;">性别</th>
                                <th style="width: 14%;">学院</th>
                                <th style="width: 14%;">专业班级</th>
                                <th style="width: 12%;">课程名称</th>
                                <th style="width: 6%;">卷面成绩</th>
                                <th style="width: 6%;">平时成绩</th>
                                <th style="width: 6%;">最终成绩</th>
                                <th style="width: 6%;">授课老师</th>
                                <th style="width: 6%;">操作</th>
                            </tr>
                        </thead>
                        <!-- 查询结果 -->
                        {% if query_conditions %}
                        <!-- 查询条件展示 -->
                        <p style="font-weight: bold;">查询条件：</p>
                        <ul>
                            {% for condition in query_conditions %}
                            <li>{{ condition }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        <!-- 查询结果展示 -->
                        {% if results %}
                        <p></p>
                        <p style="color: red; font-weight: bold;">一共输出了{{ results|length }}条符合条件的数据</p>
                        <!-- 遍历查询结果 -->
                        {% for result in results %}
                        <tr>
                            <!-- 列数据 -->
                            <td>{{ result[0] }}</td>
                            <td>{{ result[1] }}</td>
                            <td>{{ result[2] }}</td>
                            <td>{{ result[3] }}</td>
                            <td>{{ result[4] }}</td>
                            <td>{{ result[5] }}</td>
                            <td>{{ result[6] }}</td>
                            <td>{{ result[7] }}</td>
                            <td>{{ result[8] }}</td>
                            <td>{{ result[9] }}</td>
                            <td>{{ result[10] }}</td>
                            <td>
                                <form action="/modify_score" method="get" style="display: inline-block; margin-right: 5px;">
                                    <input type="hidden" name="stu_id" value="{{ result[0] }}">
                                    <input type="hidden" name="course_name" value="{{ result[6] }}">
                                    <input type="submit" value="录入" class="btn-modify">
                                </form>
                                <!-- 修改按钮 -->
                                <form action="/modify_score" method="get" style="display: inline-block; margin-right: 5px;">
                                    <input type="hidden" name="stu_id" value="{{ result[0] }}">
                                    <input type="hidden" name="course_name" value="{{ result[6] }}">
                                    <input type="submit" value="修改" class="btn-modify">
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                        {% else %}
                        <!-- 如果查询结果为空 -->
                        <p style="color: red; font-weight: bold;">抱歉，系统中没有找到符合您要求的结果！</p>
                        {% endif %}
                    </table>
                    {% endif %}
                </table>
            </div>
        </div>
    </div>
</body>

</html>