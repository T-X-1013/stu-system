<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生成绩管理系统</title>
    <link rel="icon" href="../favicon.ico">
    <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../static/css/main.css" />
    <style>







    </style>
    <script>

        function toggleRowsVisibility(event) {
    // 获取当前点击按钮所在的行
    var clickedButton = event.target;
    var clickedRow = clickedButton.parentNode.parentNode;
    var rowIndex = clickedRow.getAttribute('data-index');

    // 获取对应的<div>
    var courseInfoRow = document.querySelector('.course-info-row[data-index="' + rowIndex + '"]');

    // 检查当前按钮的文本内容
    if (clickedButton.value === '查看详情') {
        // 点击查看详情按钮时，将其他<div>隐藏，并修改按钮文本为“返回”
        document.querySelectorAll('.course-info-row').forEach(function(row) {
            if (row !== courseInfoRow) {
                row.style.display = 'none';
            }
        });
        clickedButton.value = '返回';
        // 显示当前行对应的<div>
        courseInfoRow.style.display = 'block';
    } else {
        // 点击返回按钮时，将所有<div>显示，并修改按钮文本为“查看详情”
        document.querySelectorAll('.course-info-row').forEach(function(row) {
            row.style.display = 'none';
        });
        clickedButton.value = '查看详情';
    }
}


    </script>
</head>

<body>


    <div class="container">
        <div class="header">
            <span class="left">汉 东 大 学 学 生 信 息 管 理 系 统</span>
            <span class="right">你 好，{{user_info}}管 理 员!</span>
            <span class="right_right"><a href="/">退出登陆</a></span>
        </div>
        <div class="leftside">
        <ul>
            <li><a href="/student_view">学生信息查询</a></li>
            <li><a href="/student">学生信息录入</a></li>
            <li><a href ="/update_student">学生信息删改</a></li>
            <li class="first"><a href="">老师开设课程查看</a></li>
            <li><a href="/student_courses">学生选课管理</a></li>
            <li><a href="/score_infos">学生成绩</a></li>
            <li><a href="/graduation">毕业学生去向</a></li>
            <li><a href="/dataAnalysis">数据分析</a></li>
            <li><a href="/adminstator">系统管理员变动</a></li>
        </ul>
        </div>
        <div class="container-fluid">
            <h1 class="sub-header center">教 师 开 课 信 息 查 看 系 统</h1>
            <div class="table-responsive">
                <table class="table table-striped">
                    <form action="" method="post" onsubmit="return handleSubmit()">
                        <thead>
                            <tr>
                                <th>工号</th>
                                <th>姓名</th>
                                <th>学院</th>
                                <th>职称</th>
                                <th>操作</th> <!-- 新增操作列 -->
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input class="long" name="ter_id" type="text" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                                <td><input class="long" name="ter_name" type="text" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                                <td>
                                    <select name="ter_school">
                                        <option value="">不限</option>
                                        <option value="计算机与信息工程学院">计算机与信息工程学院</option>
                                        <option value="金融学院">金融学院</option>
                                    </select>
                                </td>
                                <td>
                                    <select name="ter_title">
                                        <option value="">不限</option>
                                        <option value="教授">教授</option>
                                        <option value="副教授">副教授</option>
                                        <option value="讲师">讲师</option>
                                        <option value="助教">助教</option>
                                        <!-- 专业班级选项 -->
                                    </select>
                                </td>
                                <td><input class="last" type="submit" value="查询" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                            </tr>
                        </tbody>
                    </form>
                    <!-- 查询结果展示 -->
                    {% if query_conditions or query_results %}
                    <table class="table table-striped student-table">
                        <!-- 表头 -->
                        <thead>
                            <tr>
                                <th style="width: 6%;">工号</th>
                                <th style="width: 6%;">姓名</th>
                                <th style="width: 4%;">性别</th>
                                <th style="width: 12%;">所属学院</th>
                                <th style="width: 6%;">职称</th>
                                <th style="width: 12%;">开设课程1</th>
                                <th style="width: 12%;">开设课程2</th>
                                <th style="width: 12%;">开设课程3</th>
                                <th style="width: 12%;">操作</th>
                            </tr>
                        </thead>
                        <!-- 查询结果 -->
                        {% if query_conditions %}
                        <!-- 查询条件展示 -->
                        <p style="font-weight: bold;">查询条件：</p>
                        <ul>
                            {% for condition in query_conditions %}
                            <li>{{ condition }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        <!-- 查询结果展示 -->
                        {% if query_results %}
                        <p></p>
                        <p style="color: red; font-weight: bold;">一共输出了{{ query_results|length }}条符合条件的数据</p>
                        <!-- 遍历查询结果 -->
                        {% for result in query_results %}
                        <tr data-index="{{ loop.index }}">
                            <!-- 列数据 -->
                            <td>{{ result[0] }}</td>
                            <td>{{ result[1] }}</td>
                            <td>{{ result[2] }}</td>
                            <td>{{ result[3] }}</td>
                            <td>{{ result[4] }}</td>
                            <td>{{ result[5] }}</td>
                            <td>{{ result[6] }}</td>
                            <td>{{ result[7] }}</td>

                            <td>
                                <input class="submit-btn-right btn-search" type="submit" value="查看详情" onclick="toggleRowsVisibility(event)">
                            </td>
                        </tr>
                        <tr>
                        <td colspan="9">
                                <div class="course-info-row" style="display: none;" data-index="{{ loop.index }}">
                                    <div class="course-info bold-black">》》》  课程简介  《《《</div>
                                    <div class="course-info black-red">开设课程一：<span>{{ result[5] }}</span></div>
                                    <div class="course-info blue" >{{ result[8] }}</div>
                                    <div class="course-info black-red">开设课程二：<span>{{ result[6] }}</span></div>
                                    <div class="course-info blue">{{ result[9] }}</div>
                                    <div class="course-info black-red">开设课程三：<span>{{ result[7] }}</span></div>
                                    <div class="course-info blue">{{ result[10] }}</div>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        {% else %}
                        <!-- 如果查询结果为空 -->
                        <p style="color: red; font-weight: bold;">抱歉，系统中没有找到符合您要求的结果！</p>
                        {% endif %}
                    </table>
                    {% endif %}
                </table>
            </div>
        </div>
    </div>
</body>

</html>